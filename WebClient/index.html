<html>
<head>
    <title>Concept of Web-Palaceclient</title>
    <script src="/socket.io/socket.io.js"></script>
    <script>
        var socket = io.connect('http://localhost');
        socket.on('log', function (data) {
            var logwindow = document.getElementById('log');
            logwindow.innerHTML = logwindow.innerHTML + data.text + '<br>';
            logwindow.scrollTop = logwindow.scrollHeight;
        });
        socket.on('dev-log', function (data) {
            var logwindow = document.getElementById('dev-log');
            console.log(data);
            logwindow.innerHTML = logwindow.innerHTML + data.text + '<br>';
            logwindow.scrollTop = logwindow.scrollHeight;
        });
        socket.on('roomChanged', function (roomData, mediaServer) {
            console.log(roomData);
            var room = document.getElementById('room');
            var roomName = document.getElementById('room-name')
            var stage = document.getElementById('room-stage');
            var img = new Image();
            stage.style.backgroundImage = "url('" + mediaServer + roomData.backgroundFile + "')";
            img.src = mediaServer + roomData.backgroundFile;
            roomName.innerHTML = roomData.name;
            room.style.width = img.width;
            stage.style.height = img.height;
            stage.innerHTML = "";
        });


    </script>
</head>
<body>
<div id="room" style="width: 300px; float: left;">
    <div id="room-title" style="background-color:cornflowerblue; float: left; width: 100%">
        Room-Name: <span id="room-name"></span>
    </div>
    <div id="room-stage" style="width: 100%; height: 200px; background-color: #AEBDCC; float: left;">
            Not Connected!
    </div>
</div>
<div style="float: left;">Log<br><div id="log" style="width: 300px; height: 384px; background-color: #eeeeee;  overflow:scroll;"></div></div>
<div style="float: left; border: 1px solid silver">Dev Log<br><div id="dev-log" style="width: 300px; height: 384px; background-color: #eeeeee;  overflow:scroll;"></div></div>
<textarea id="input" style="width: 512px; height: 50px; background-color: #eeeeee; float: left; clear:both; "></textarea>

<script>
    document.getElementById('input').onkeypress = function(e){
        if (!e) e = window.event;
        if (e.keyCode == '13'){
            socket.emit('text entered', { text: this.value });
            this.value = '';
            return false;
        }
    }
</script>
</body>
</html>

